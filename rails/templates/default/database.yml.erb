<% (['development', 'production'] + [@environment]).uniq.each do |env| -%>
<%= env %>:
 adapter: <%= @database[:adapter].to_s.inspect %>
 database: <%= @database[:database].to_s.inspect %>
 encoding: <%= (@database[:encoding] || 'utf8').to_s.inspect %>
 host: <%= (@database[:host] || 'localhost').to_s.inspect %>
 username: <%= @database[:username].to_s.inspect %>
 password: <%= @database[:password].to_s.inspect %>
 reconnect: <%= @database[:reconnect] ? 'true' : 'false' %>
<% if @database[:pool] -%>
 pool: <%= @database[:pool].to_i.inspect %>
<% end -%>
<% if @database[:port] -%>
 port: <%= @database[:port].to_i.inspect %>
<% end -%>

<% if @database[:ext_database] -%>
limoserver_<%= env %>:
 adapter: <%= @database[:ext_database][:adapter].to_s.inspect %>
 database: <%= @database[:ext_database][:database].to_s.inspect %>
 encoding: <%= (@database[:ext_database][:encoding] || 'utf8').to_s.inspect %>
 host: <%= (@database[:ext_database][:host] || 'localhost').to_s.inspect %>
 username: <%= @database[:ext_database][:username].to_s.inspect %>
 password: <%= @database[:ext_database][:password].to_s.inspect %>
 reconnect: <%= @database[:ext_database][:reconnect] ? 'true' : 'false' %>
<% if @database[:ext_database][:pool] -%>
 pool: <%= @database[:ext_database][:pool].to_i.inspect %>
<% end -%>
<% if @database[:ext_database][:port] -%>
 port: <%= @database[:ext_database][:port].to_i.inspect %>
<% end -%>
<% end -%>

<% end %>